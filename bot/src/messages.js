// Hebrew message templates for ×”××‘×¨×™×§×Ÿ bot

const MESSAGES = {
  // Welcome flow
  welcome: `âœ¨ *×‘×¨×•×›×™× ×”×‘××™× ×œ×”××‘×¨×™×§×Ÿ!* âœ¨

ğŸ§¹ ×©×™×¨×•×ª×™ × ×™×§×•×™ ××§×¦×•×¢×™×™× ×œ×¡×¤×•×ª, ×©×˜×™×—×™×, ××–×¨× ×™×, ×›×•×¨×¡××•×ª ×•×¨×™×¤×•×“×™×.

× ×©××— ×œ×¢×–×•×¨ ×•×œ×ª×ª ×œ×›× ×”×¦×¢×ª ××—×™×¨ ××“×•×™×§×ª ğŸ’°

ğŸ“ *××”×™×›×Ÿ ××ª×?*
_(×× ×—× ×• × ×•×ª× ×™× ×©×™×¨×•×ª ×‘×—×™×¤×”, ×”×§×¨×™×•×Ÿ ×•×”×¦×¤×•×Ÿ ×‘×œ×‘×“)_`,

  // Item selection
  itemSelection: `ğŸ‘ ××¢×•×œ×”!

ğŸ›‹ï¸ *××™×–×” ×¤×¨×™×˜ ×ª×¨×¦×• ×œ× ×§×•×ª?*

1ï¸âƒ£ ×¡×¤×”
2ï¸âƒ£ ××–×¨×Ÿ
3ï¸âƒ£ ×©×˜×™×—
4ï¸âƒ£ ×›××” ×¤×¨×™×˜×™× ×™×—×“

_(×©×œ×—×• ××ª ××¡×¤×¨ ×”××¤×©×¨×•×ª ××• ×©× ×”×¤×¨×™×˜)_`,

  // Mattress flow
  mattressType: `ğŸ›ï¸ *××™×–×” ×¡×•×’ ××–×¨×Ÿ ×™×© ×œ×›×?*

1ï¸âƒ£ ×™×—×™×“
2ï¸âƒ£ ×–×•×’×™
3ï¸âƒ£ ×§×™× ×’ ×¡×™×™×–`,

  mattressBothSides: `ğŸ”„ *×”×× ×™×© ×¦×•×¨×š ×‘× ×™×§×•×™ ××©× ×™ ×”×¦×“×“×™×?*

1ï¸âƒ£ ×›×Ÿ âœ…
2ï¸âƒ£ ×œ× âŒ`,

  mattressStains: `ğŸ” *×”×× ×™×© ×›×ª××™× ×§×©×™× ×•×¨×™×— ×œ× ×˜×•×‘?*
_(×©×ª×Ÿ, ×“× ×•×›×“×•××”)_

1ï¸âƒ£ ×›×Ÿ âœ…
2ï¸âƒ£ ×œ× âŒ`,

  mattressAge: `â° *×›××” ×–××Ÿ ×”××–×¨×Ÿ ×‘×©×™××•×©?*

_(×œ×“×•×’××”: ×©× ×”, 3 ×©× ×™×, ×—×“×©)_`,

  mattressPhoto: `ğŸ“¸ *×× × ×©×œ×—×• ×ª××•× ×” ×©×œ ×”××–×¨×Ÿ*

×œ×§×‘×œ×ª ××‘×—×•×Ÿ ×•×”×¦×¢×ª ××—×™×¨ ××“×•×™×§×ª ğŸ’°`,

  // Sofa flow
  sofaType: `ğŸ›‹ï¸ *××™×–×” ×¡×•×’ ×¡×¤×” ×™×© ×œ×›×?*

1ï¸âƒ£ ×¡×¤×” ×¡×˜× ×“×¨×˜×™×ª
2ï¸âƒ£ ×©×–×œ×•× ×’ "×¨"
3ï¸âƒ£ ××¢×¨×›×ª ×™×©×™×‘×” ×’×“×•×œ×”
4ï¸âƒ£ ×¡×¤×” ××œ×‘× ×™×ª`,

  sofaPhoto: `ğŸ“¸ *×× × ×©×œ×—×• ×ª××•× ×” ×©×œ ×”×¡×¤×”*

×œ×§×‘×œ×ª ××‘×—×•×Ÿ ×•×”×¦×¢×ª ××—×™×¨ ××“×•×™×§×ª ğŸ’°

ğŸ’¡ _×—×©×•×‘: ×”×¦×¢×ª ××—×™×¨ ××‘×•×¡×¡×ª ×¢×œ ×’×•×“×œ ×”×¡×¤×”, ××¦×‘ ×”×œ×›×œ×•×š ×•×”×›×ª××™×, ×•×”×× ×”×›×¨×™×•×ª × ×©×œ×¤×•×ª ××• ×§×‘×•×¢×•×ª_`,

  // Carpet flow
  carpetType: `ğŸ§¶ *××™×–×” ×¡×•×’ ×©×˜×™×— ×™×© ×œ×›×?*

1ï¸âƒ£ ×©×˜×™×— ×©××’×™
2ï¸âƒ£ ×©×˜×™×— ×¡×™× ×˜×ª×™
3ï¸âƒ£ ×©×˜×™×— ×•×™× ×˜×’×³ / ××•×“×¨× ×™
4ï¸âƒ£ ×©×˜×™×— ×¢×‘×•×“×ª ×™×“ (×¦××¨ / ×›×•×ª× ×”)
5ï¸âƒ£ ×©×˜×™×— ××§×™×¨ ×œ×§×™×¨`,

  carpetSize: `ğŸ“ *××” ×’×•×“×œ ×”×©×˜×™×—?*

_(×œ×“×•×’××”: 2x3 ××˜×¨, ×§×˜×Ÿ, ×’×“×•×œ)_`,

  carpetPhoto: `ğŸ“¸ *×× × ×©×œ×—×• ×ª××•× ×” ×©×œ ×”×©×˜×™×—*

×œ×§×‘×œ×ª ××‘×—×•×Ÿ ×•×”×¦×¢×ª ××—×™×¨ ××“×•×™×§×ª ğŸ’°`,

  // Multiple items flow
  multipleItems: `ğŸ“¦ *××™×œ×• ×¤×¨×™×˜×™× ×ª×¨×¦×• ×œ× ×§×•×ª?*

1ï¸âƒ£ ×¡×¤×” ğŸ›‹ï¸
2ï¸âƒ£ ××–×¨×Ÿ ğŸ›ï¸
3ï¸âƒ£ ×©×˜×™×— ğŸ§¶

_(×©×œ×—×• ××¡×¤×¨×™× ××•×¤×¨×“×™× ×‘×¤×¡×™×§, ×œ××©×œ: 1,2)_`,

  // Completion
  thankYou: `ğŸ‰ *×ª×•×“×” ×¨×‘×”!*

× ×¦×™×’ ×™×—×–×•×¨ ××œ×™×›× ×‘×”×§×“× ×¢× ×”×¦×¢×ª ××—×™×¨ ğŸ’°

_×”××‘×¨×™×§×Ÿ - × ×™×§×™×•×Ÿ ×©××‘×¨×™×§!_ âœ¨`,

  // Errors / fallbacks
  notUnderstood: `ğŸ¤” ×œ× ×”×‘× ×ª×™ ××ª ×”×ª×©×•×‘×”

×× × ×‘×—×¨×• ××—×ª ××”××¤×©×¨×•×™×•×ª`,

  contextError: (userInput, question, example) => `ğŸ¤” ×œ× ×”×‘× ×ª×™ "${userInput}"

â“ *${question}*

ğŸ’¡ _${example}_`,

  // Transition messages for multiple items
  itemTransition: (fromItem, toItem) => `âœ… ×¡×™×™×× ×• ×¢× ×”${fromItem}!

×¢×›×©×™×• × ××©×™×š ×œ${toItem} ğŸ‘‡`,

  startingWith: (item) => `ğŸ‘ ××¢×•×œ×”! × ×ª×—×™×œ ×¢× ${item}`,

  // Owner notification template
  ownerNotification: (lead) => `ğŸ”” *×œ×™×“ ×—×“×©!*

ğŸ‘¤ *×©×:* ${lead.name}
ğŸ“ *×˜×œ×¤×•×Ÿ:* ${formatPhone(lead.phone)}
ğŸ“ *××™×§×•×:* ${lead.location}
ğŸ›‹ï¸ *×¤×¨×™×˜:* ${lead.itemType}

ğŸ“‹ *×¤×¨×˜×™× × ×•×¡×¤×™×:*
${formatDetails(lead.itemDetails)}

${lead.photos?.length ? `ğŸ“¸ *×ª××•× ×•×ª:* ${lead.photos.length}` : ''}`,
};

// Format phone number: 972544994417 -> 0544994417
function formatPhone(phone) {
  if (!phone) return '';
  const phoneStr = String(phone);
  // Remove 972 prefix and add 0
  if (phoneStr.startsWith('972')) {
    return '0' + phoneStr.slice(3);
  }
  return phoneStr;
}

// Format item details for notification
function formatDetails(details) {
  if (!details || Object.keys(details).length === 0) return '_××™×Ÿ_';

  // Handle multiple items
  if (details.items && Array.isArray(details.items)) {
    return details.items.map((item, i) => {
      const lines = [`*×¤×¨×™×˜ ${i + 1}:* ${item.type}`];
      if (item.size) lines.push(`  ğŸ“ ×’×•×“×œ: ${item.size}`);
      if (item.bothSides) lines.push(`  ğŸ”„ ×©× ×™ ×¦×“×“×™×: ${item.bothSides}`);
      if (item.stains) lines.push(`  ğŸ” ×›×ª××™×: ${item.stains}`);
      if (item.age) lines.push(`  â° ×–××Ÿ ×©×™××•×©: ${item.age}`);
      return lines.join('\n');
    }).join('\n\n');
  }

  // Single item
  const lines = [];
  if (details.type) lines.push(`ğŸ“Œ ×¡×•×’: ${details.type}`);
  if (details.size) lines.push(`ğŸ“ ×’×•×“×œ: ${details.size}`);
  if (details.bothSides) lines.push(`ğŸ”„ ×©× ×™ ×¦×“×“×™×: ${details.bothSides}`);
  if (details.stains) lines.push(`ğŸ” ×›×ª××™×: ${details.stains}`);
  if (details.age) lines.push(`â° ×–××Ÿ ×©×™××•×©: ${details.age}`);

  return lines.join('\n') || '_××™×Ÿ_';
}

module.exports = MESSAGES;
